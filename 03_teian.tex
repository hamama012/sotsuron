\chapter{提案手法}
本章では，本研究で開発するバーチャルペットについて述べる．

\section{概要}



身体性を有するバーチャルペットの開発を行うにあたり、VR技術を利用する。
HMDを用いることでユーザにバーチャルペットがそこに存在している、という錯覚を与えることができ、現実感を高めることができると考える。
システムのモデル図を以下に示す。

%更に、コントローラの振動機能を利用し、ユーザとバーチャルペットが接触した際に振動を起こすことで、触覚再現とまではいかずとも触ったという感覚をユーザに返すことができる。

%また、HMDを利用するとユーザの視界から現実の物や環境が遮断されることから、仮想空間内の環境もユーザに大きな影響を与えることが推測される。これはVRを利用するバーチャルペットのみに発生する特性であり、セラピー効果に関連することが考えられる。この仮想空間内の環境は開発側が任意に変更できることから、仮想空間の自由性として考える。


\begin{figure}[tb]
\centering
\includegraphics*[width=8.5cm,clip]{images/提案手法図.eps}
\caption{提案システムの構成}
\label{fig:system}
\end{figure} 


ユーザはHMD、ヘッドホンを装着し、コントローラを手に持った状態で仮想空間に没入する。
仮想空間にはペットとユーザの２つのアバターと、環境オブジェクトが存在する。ユーザの動作はHMDとコントローラによってトラッキングされ、仮想空間上に反映される。その動作に対し、ペットは尻尾を振るなどして反応を示す。
ユーザアバターがペットアバターとの衝突を検知すると、ユーザ管理プログラムからコントローラへ振動命令が出され、コントローラが振動する。


\subsection{仮想空間}

仮想空間の構築には、Unityを使用した。

仮想空間内の環境構築にはUnityのアセットストアで提供されているNature Starter Kit 2を使用し、森林空間を表した。より現実感を高めるため、WindZoneを配置することで風を吹かせ草などの背景オブジェクトが揺れるようにした。
更にNHKが配布している環境音素材である木々のざわめき、鳥のさえずりの二種類の音楽データを重ねて再生することで、森林らしさを追求した。

\begin{table}[tb]
\centering
\caption{tabularによる表の例}
\label{table:example}
\scalebox{1.00}{
\begin{tabular}{|c||c|l|c|r|}
\hline
名前 & 説明 \\
\hline
petController & ペットの動作管理 \\
playerController & ユーザーの動作管理 \\
DirectionManager & ペットの視線移動における補完\\
\hline 
\end{tabular}}

\end{table}

\subsection{ユーザ}
ユーザの手の3DCGモデリングにはMayaを使用した。

\subsection{バーチャルペット}

バーチャルペットの３DCGモデリングにはMayaを使用した。待機、歩く、走る、尻尾を振るの４種類のアニメーションが可能である。



\section{ユーザ管理部}

\section{バーチャルペット管理部}


%https://research.miyashita.com/2017/D174/D174.pdf

%http://archives.bukkyo-u.ac.jp/rp-contents/SO/0037/SO00370L099.pdf

%https://www.jstage.jst.go.jp/article/tvrsj/12/1/12_KJ00007499068/_pdf/-char/ja